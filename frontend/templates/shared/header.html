<!-- header.html -->
<nav class="navbar bg-transparent border-bottom py-2">
    <div class="container d-flex justify-content-between align-items-center">
        <!-- Logo / Brand -->
        <a class="navbar-brand text-dark fw-bold d-flex align-items-center" href="/">
            <img src="/frontend/css/images/cactus.png" alt="Plant Talk Logo" height="32"            
                class="d-inline-block align-text-top me-2">
            <span class="logo-text">Plant Talk</span>
        </a>

        <!-- Unsigned state -->
        <div id="nav-unsigned" class="d-flex">
            <a href="/register.html" class="btn btn-outline-light me-2">Register</a>
            <a href="/login.html" class="btn btn-outline-light me-2">Login</a>
        </div>

        <!-- Signed-in state -->
        <div id="nav-signed" class="d-flex d-none align-items-center">
            <!-- Create Post -->
            <a href="/new-post.html" class="btn btn-outline-light me-2">Create Post</a>
            <!-- Notifications -->
            <a href="/notifications" class="position-relative me-3 p-0">
                <!-- notification icon image -->
                <img src="../css/images/notification.png" alt="Notifications" width="24" height="24">
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
            </a>
            <!-- Profile Thumbnail Dropdown -->
            <div class="dropdown">
                <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle p-0" id="profileMenu"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <!-- user thumbnail -->
                    <img src="../css/images/avatar.png" alt="Profile" width="32" height="32"
                        class="rounded-circle img-thumbnail">
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileMenu">
                    <li><a class="dropdown-item" href="/profile">Profile</a></li>
                    <li><a class="dropdown-item" href="/settings">Settings</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="/logout">Log Out</a></li>
                </ul>
            </div>
        </div>

        <!-- Error state -->
        <div id="nav-error" class="d-flex d-none text-danger">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <a class="navbar-brand text-dark fw-bold d-flex align-items-center" href="/">
                <img src="../css/images/cactus.png" alt="Plant Talk Logo" height="32" class="d-inline-block align-text-top me-2">
                <span class="logo-text">Plant Talk</span>    </a>
        </div>
    </div>
</nav>

<script>
    // replace this with your real check (cookie, fetch, global var, etc.)
    async function detectUserState() {
        try {
            // example: hit your auth/status endpoint
            const res = await fetch('/api/auth/status');
            if (!res.ok) throw new Error();
            const { loggedIn } = await res.json();
            return loggedIn ? 'signed' : 'unsigned';
        } catch {
            return 'error';
        }
    }

    document.addEventListener('DOMContentLoaded', async () => {
        const state = await detectUserState();            // 'signed' | 'unsigned' | 'error'
        document.getElementById(`nav-${state}`).classList.remove('d-none');
    });
</script>
  