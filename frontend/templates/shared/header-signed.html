<!-- header-unsigned.html -->
<nav class="navbar bg-transparent border-bottom py-2"></nav>
<div class="container d-flex justify-content-between align-items-center">
    <!-- Logo / Brand -->
    <a class="navbar-brand text-dark fw-bold d-flex align-items-center" href="/">
        <img src="/frontend/css/images/cactus.png" alt="Plant Talk Logo" height="32"
            class="d-inline-block align-text-top me-2">
        <span class="logo-text">Plant Talk</span>
    </a>

    <!-- Static nav links/buttons -->
    <div class="d-flex">
        <!-- Create Post -->
        <a href="/new-post.html" class="btn btn-outline-light me-2">Create Post</a>
       
        <!-- Notifications -->
        <a href="/notifications" class="btn btn-link position-relative me-3 p-1" aria-label="Notifications">
            <!-- notification icon image -->
            <img src="/frontend/css/images/notification.png" alt="Notifications" width="24" height="24">
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
        </a>
        
        <!-- Profile Thumbnail Dropdown -->
        <div class="dropdown">
            <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle p-0" id="profileMenu"
                data-bs-toggle="dropdown" aria-expanded="false">
                <!-- user thumbnail -->
                <img src="/frontend/css/images/avatar.png" alt="Profile" width="32" height="32" class="rounded-circle img-thumbnail">
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileMenu">
                <li><a class="dropdown-item" href="/profile">Profile</a></li>
                <li>
                <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="/logout">Log Out</a></li>
            </ul>
        </div>
    </div>
</div>
<script>    
    async function loadNotificationCount() {
            try {
                console.log('ðŸ”” Loading notification count...');

                const response = await fetch('/api/notifications/count');
                if (response.ok) {
                    const data = await response.json();
                    const unreadCount = data.count || 0;
                    console.log('ðŸ”” Unread notifications:', unreadCount);

                    const badge = document.getElementById('notification-badge');
                    if (badge) {
                        badge.textContent = unreadCount;
                        if (unreadCount === 0) {
                            badge.style.display = 'none';
                        } else {
                            badge.style.display = 'inline';
                        }
                    }
                }
            } catch (error) {
                console.error('Error loading notifications:', error);
            }
        }

        fetch('/api/notifications/count')
                .then(r => r.json())
                .then(data => console.log('Notification count:', data));
</script>
</nav>